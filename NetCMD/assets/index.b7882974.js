var $=Object.defineProperty;var b=(n,t,e)=>t in n?$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>(b(n,typeof t!="symbol"?t+"":t,e),e);const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}};w();class S{constructor(){c(this,"dispOut",document.body);c(this,"vendor","TechWorldInc");c(this,"pName","NetCMD");c(this,"pVer","2.0-alpha");c(this,"iId","");c(this,"cmd","");c(this,"val","");c(this,"path","/");c(this,"prompt",`[${this.path}]
$`);c(this,"hist",[]);c(this,"kLog",[]);c(this,"argv",[]);c(this,"kStartTime",0);c(this,"kHalt",!1)}}const r=new S,E={execute:()=>{var n,t;if(r.argv.length>0){let o=r.argv.join(" ").toLowerCase();g.has(o)?(a.output(""),a.outputColor("[Usage]: ","var(--blue)",!1),a.output(`${(n=g.get(o))==null?void 0:n.usage}`),a.outputColor(`
[Description]: ${(t=g.get(o))==null?void 0:t.description}`,"var(--blue)")):a.outputColor(`[Error]: Cannot find command "${o}"`)}else{let e=g.entries();for(let o of e)a.outputColor(`[${o[0].toUpperCase().padEnd(10," ")}]${o[1].description}`,"var(--blue)")}},description:"Display a list of built-in commands",usage:"HELP [command]"},I={execute:()=>{r.dispOut.innerText=""},description:"Clear the screen",usage:"CLEAR"},x={execute:()=>{a.output(`${r.pName} version ${r.pVer}. Created by ${r.vendor}`)},description:"Display the version information",usage:"VER"},L={execute:()=>{let n=r.val.match(/"(.*?)"/);if(n&&n.length>1){let t=n[1];a.output(t)}else a.outputColor("[Error]: Unable to echo: syntax invalid!")},description:"Echo back the given text",usage:'ECHO "<string>"'};class k{replaceVariables(t){var i,s;let e="",o=t.split(" ");for(let l=0;l<o.length;l++)if(o[l].startsWith("$")){let u=o[l].replace("$","");if(console.log(u,(i=d.get(u))==null?void 0:i.value),d.has(u)){let m=(s=d.get(u))==null?void 0:s.value;o[l]=m!=null?m:o[l]}}return e=o.join(" "),e}}const R=new k,N=new Map([["PS",{value:r.prompt,readonly:!1}],["VER",{value:r.pVer,readonly:!0}],["AUTHOR",{value:r.vendor,readonly:!0}],["PRODUCTNAME",{value:r.pName,readonly:!0}]]),d=N,T={execute:()=>{var e;let n=r.argv[0],t=r.val.match(/"(.*?)"/)[1];if(d.has(n)&&((e=d.get(n))==null?void 0:e.readonly))a.outputColor("[Error]: ","var(--red)",!1),a.output(`Cannot set readonly variable "${n}".`);else{const o={value:t,readonly:!1};d.set(n,o),a.outputColor(`Variable [${n}] set to [${t}].`,"var(--blue)")}},description:"Set a variable to a given string",usage:'SET <name> "<value>"'},O={execute:()=>{p.panic()},description:"Cause a kernel panic",usage:"PANIC"},D={execute:()=>{a.outputColor("[Error]: not implemented")},description:"Display the contents of the current directory",usage:"DIR <path>"};class U{async getUserRepos(t){return await fetch(`https://api.github.com/users/${t}/repos`).then(o=>o.json()).then(o=>o).catch(()=>({}))}async getOrgRepos(t){return await fetch(`https://api.github.com/orgs/${t}/repos`).then(o=>o.json()).then(o=>o).catch(()=>({}))}async getRepoDetails(t){return await fetch(`https://api.github.com/repos/${t}`).then(o=>o.json()).then(o=>o).catch(()=>({}))}async getCommits(t){return await fetch(`https://api.github.com/repos/${t}/commits`).then(o=>o.json()).then(o=>o).catch(()=>({}))}}const h=new U;class H{getTime(t=new Date){p.log("Started Utilities.getTime");let e=t;return{h:e.getHours().toString().padStart(2,"0"),m:e.getMinutes().toString().padStart(2,"0"),s:e.getSeconds().toString().padStart(2,"0"),ms:e.getMilliseconds().toString().padStart(3,"0")}}replaceAllCharsInStr(t,e,o){p.log("Started Utilities.replaceAllCharsInStr");let i="";for(let s=0;s<t.length;s++)t.charAt(s)===e?i+=o:i+=t.charAt(s);return i}createSeparatorFor(t){let e="";for(let o=0;o<t.length;o++)e+="-";return e}removeCharsFromString(t="",e=[]){let o=t.split("");for(let i=0;i<o.length;i++)e.includes(o[i])&&(o[i]="");return o.join("")}}const v=new H,A={execute:async()=>{if(r.argv.length){let n=r.argv[0].toLowerCase();y.has(n)?await y.get(n)():a.outputColor(`[Error]: "${n}" is not a valid sub-command!`)}else a.outputColor('[Error]: No sub-command specified! Type "HELP GH" for help')},description:"View information about GitHub repositories",usage:"GH <userrepo|orgrepo|repo|commits> <user/repo|user|org>"},y=new Map([["userrepo",async()=>{let n=r.argv[1],t=await h.getUserRepos(n);for(let e=0;e<t.length;e++)a.output(`${t[e].name.padEnd(35," ")}: `,!1),t[e].description?a.output(t[e].description):a.outputColor("[Description Not Found]","var(--gray)")}],["orgrepo",async()=>{let n=r.argv[1],t=await h.getOrgRepos(n);for(let e=0;e<t.length;e++)a.output(`${t[e].name.padEnd(35," ")}: `,!1),t[e].description?a.output(t[e].description):a.outputColor("[Description Not Found]","var(--gray)")}],["repo",async()=>{let n=r.argv[1],t=await h.getRepoDetails(n);!t.message&&!t.documentation_url?(a.output(`Owner           : ${t.owner.login}`),a.output(`Full Name       : ${t.full_name}`),a.output(`Description     : ${t.description||"Description Not Found"}
`),a.output(`URL             : ${t.html_url}`),a.output(`Git URL         : ${t.html_url}.git
`),a.output(`Last Updated    : ${t.updated_at}`)):a.outputColor("[Error]: failed to fetch repository information: repository not found")}],["commits",async()=>{let n=r.argv[1],t=await h.getCommits(n);if(!t.message&&!t.documentation_url){a.output("");for(let e=0;e<t.length;e++){let o=`Commit ${t[e].sha}`;a.output(`${o}
${v.createSeparatorFor(o)}
Message:
${t[e].commit.message}
Date: ${t[e].commit.author.date}
Created By: ${t[e].commit.author.name} (${t[e].commit.author.email})
`)}}else a.outputColor("[Error]: failed to fetch commits: repository not found")}]]),P={execute:()=>{if(!r.hist.length){a.output("The history list is empty!");return}let n=r.hist.length.toString().length+1;for(let t=0;t<r.hist.length;t++)a.outputColor(`[${t.toString().padStart(n,"0")}]: ${r.hist[t]}`,"var(--yellow)")},description:"Display the history list",usage:"HIST"},F={execute:()=>{let n=r.val.match(/"(.*?)"/),t="",e=parseInt(r.argv[0]);if(n&&n.length>1&&!!e){t=n[1],a.output(`Repeating "${t}" ${e} times...
`);for(let o=0;o<e;o++)a.evaluateCommand(t,!0)}else a.outputColor("[Error]: Unable to repeat: syntax invalid!")},description:"Repeat the specified command a specified amount of times",usage:'REPEAT <amount> "<command>"'},g=new Map([["help",E],["clear",I],["ver",x],["echo",L],["set",T],["panic",O],["dir",D],["gh",A],["hist",P],["repeat",F]]),M={execute:()=>{p.log("Start Core Function 'default'"),a.outputColor("[Error]:","var(--red)",!1),a.output(` ${r.cmd}: command not found`)}},V={execute:()=>{p.log("Start Core Function 'intro'"),a.outputColor(`[\u2588] Welcome to [${r.pName}]!`,"var(--purple)"),a.outputColor("[\u2588]","var(--blue)"),a.outputColor(`[\u2588] You are currently running build [${r.pVer}].`,"var(--aqua)"),a.outputColor("[\u2588]","var(--green)"),a.outputColor("[\u2588] You can type [HELP] for a list of commands.","var(--yellow)")}},C=new Map([["default",M],["intro",V]]);class j{output(t,e=!0){let o=R.replaceVariables(t),i=document.createElement("span");i.innerText=`${o}${e?`
`:""}`,r.dispOut.append(i)}prompt(){var t;if(!r.kHalt){p.log("Started userInterface.prompt");let e=this.getPrompt();r.iId&&(p.log(`Unfocused input ${r.iId}`),(t=document.getElementById(r.iId))==null||t.setAttribute("disabled","true")),p.log("Started userInterface.prompt"),this.outputColor(`
${e}`,"var(--gray)",!1);let o=document.createElement("input");o.className="input",o.id=`#${Math.floor(Math.random()*999999999)}`,o.style.width=`calc(100% - ${e.length}em)`,o.spellcheck=!1,r.iId=o.id,r.dispOut.append(o),this.output("")}}async evaluateCommand(t,e){var u,m,f;p.log("Started userInterface.evaluateCommand");let o=document.getElementById(r.iId),i,s,l;if(t?(l=t,i=t.split(" "),s=i[0].toLowerCase()):(l=o.value,r.val=o==null?void 0:o.value,i=o==null?void 0:o.value.split(" "),s=i[0].toLowerCase()),r.cmd=s,g.has(s)){r.argv=i.slice(1),r.hist.push(l),console.log(r.hist),p.log(`Executing command "${s}" (${(u=g.get(s))==null?void 0:u.description})`);try{await((m=g.get(s))==null?void 0:m.execute())}catch{p.panic()}}else p.log(`Execution of command "${s}" failed: no such definition`),s&&((f=C.get("default"))==null||f.execute());e||this.prompt()}inputFocusLoop(){let t=setInterval(()=>{let e=document.getElementById(r.iId);e&&e.focus(),r.kHalt&&clearInterval(t)},50)}getPrompt(){var o,i;let t="",e=(((o=d.get("prompt"))==null?void 0:o.value)||r.prompt).split(" ");for(let s=0;s<e.length;s++){if(e[s].startsWith("$")){let l=e[s].replace("$","");if(d.has(l)){let u=(i=d.get(l))==null?void 0:i.value;e[s]=u!=null?u:e[s]}}t+=`${e[s]} `}return t.trimEnd(),t}outputColor(t,e="var(--red)",o=!0,i=""){const s=t.split(/(\[[^\]]*\])/);for(let l=0;l<s.length;l++){let u=document.createElement("span"),m=s[l].startsWith("[")&&s[l].endsWith("]");u.style.color=m?e:i,u.innerText=v.removeCharsFromString(s[l],["[","]"]),r.dispOut.append(u)}this.output("",o)}}const a=new j;class G{register(){p.log("Started Keyboard.register"),document.addEventListener("keydown",t=>{this.processEvent(t)})}processEvent(t){switch(t.key.toLowerCase()){case"enter":a.evaluateCommand();break;case"arrowup":console.log("arrowup");break;case"arrowdown":console.log("arrowdown");break}}}const B=new G;class K{init(t){var e;t&&(this.setIntervals(),r.kStartTime=new Date().getTime(),a.inputFocusLoop(),B.register(),this.log(`Setting environment.displayOutput to ${t}...`),r.dispOut=t,this.log("Started commands.intro"),(e=C.get("intro"))==null||e.execute(),this.log("Starting prompt loop..."),a.prompt())}setIntervals(){setInterval(()=>{var t;r.kHalt&&((t=document.getElementById(r.iId))==null||t.setAttribute("disabled","true")),window.onerror=console.error=()=>{this.panic()},document.addEventListener("error",()=>{this.panic()})},50)}panic(){r.kHalt=!0,this.log("SYSTEM PANIC! ABORTING ALL PROCESSES..."),r.dispOut.innerText="",a.output(`! KERNEL PANIC !

Kernel Log:`);for(let t=0;t<r.kLog.length;t++)r.dispOut.innerText+=r.kLog[t];a.output(`
System halted. Press Ctrl+R to restart.`)}log(t=""){let e=new Date().getTime()-r.kStartTime;r.kLog.push(`[${e}] ${t}
`)}}const p=new K;try{p.init(document.body)}catch(n){throw p.panic(),console.log(typeof n),n}
