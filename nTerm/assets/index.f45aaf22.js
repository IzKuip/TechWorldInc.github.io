var L=Object.defineProperty;var N=(c,e,t)=>e in c?L(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var m=(c,e,t)=>(N(c,typeof e!="symbol"?e+"":e,t),t);const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}};x();class k{constructor(){m(this,"kStartTime",0);m(this,"kHalt",!1);m(this,"currentInstance");m(this,"instances",new Map);m(this,"vendor","TechWorldInc");m(this,"pName","nTerm");m(this,"pVer","2.0");m(this,"defaultTheme","default");m(this,"prompt",`[/]
$`)}}const r=new k,H={execute:(...c)=>{var t,n;const e=c[0];if(e){const o=e;v.has(o)?(s.output(""),s.outputColor("[Usage]: ","var(--blue)",!1),s.output(`${(t=v.get(o))==null?void 0:t.usage}`),s.outputColor(`
[Description]: ${(n=v.get(o))==null?void 0:n.description}`,"var(--blue)")):s.error(`Cannot find command "${o}"`)}else{const o=v.entries();let a=[];for(const i of o)a.push(i[0]);a=a.sort();for(let i in a){let l=v.get(a[i]);s.outputColor(`[${a[i].toUpperCase().padEnd(10," ")}]${l==null?void 0:l.description}`,"var(--blue)")}}},description:"Display a list of built-in commands",usage:"HELP [command]"},R={execute:()=>{r.currentInstance.env.temp.innerHTML="",s.flushTempToBuffer(),s.syncTarget()},description:"Clear the screen",usage:"CLEAR"},P={execute:()=>{s.output(`${r.pName} version ${r.pVer}. Created by ${r.vendor}`)},description:"Display the version information",usage:"VER"},A={execute:(...c)=>{const e=c.join("").match(/"(.*?)"/);if(e&&e.length>1){const t=e[1];s.output(t)}else s.error("Unable to echo: syntax invalid!")},description:"Echo back the given text",usage:'ECHO "<string>"'};class U{getTime(e=new Date){u.log("Started Utilities.getTime");const t=e;return{h:t.getHours().toString().padStart(2,"0"),m:t.getMinutes().toString().padStart(2,"0"),s:t.getSeconds().toString().padStart(2,"0"),ms:t.getMilliseconds().toString().padStart(3,"0")}}replaceAllCharsInStr(e,t,n){u.log("Started Utilities.replaceAllCharsInStr");let o="";for(let a=0;a<e.length;a++)e.charAt(a)===t?o+=n:o+=e.charAt(a);return o}createSeparatorFor(e){u.log("Started Utilities.createSeperatorFor");let t="";for(let n=0;n<e.length;n++)t+="-";return t}removeCharsFromString(e="",t=[]){u.log("Started Utilities.removeCharsFromString");const n=e.split("");for(let o=0;o<n.length;o++)t.includes(n[o])&&(n[o]="");return n.join("")}unescapeSlashes(e){u.log("Started Utilities.unescapeSlashes");let t=e.replace(/(^|[^\\])(\\\\)*\\$/,"$&\\");t=t.replace(/(^|[^\\])((\\\\)*")/g,"$1\\$2");try{t=JSON.parse(`"${t}"`)}catch{return e}return t}async fetchJSON(e){return await fetch(e).then(n=>n.json()).then(n=>n).catch(()=>({}))}makeHTMLTagsURLSafe(e){let t=e.split("");for(let n=0;n<t.length;n++)t[n]=t[n]=="<"?"&lt;":t[n]==">"?"&gt;":t[n];return t.join("")}reset(e){const t=[["\\n",`
`],["&gt;",">"],["&lt;","<"]];let n=e;for(const o in t)n=n.replace(o[0],o[1]);return e.replace("\\n",`
`).replace("&lt;","<").replace("&gt;",">")}}const g=new U;class D{replaceVariables(e){var o;let t="";const n=e.split(" ");for(let a=0;a<n.length;a++)if(n[a].startsWith("$")){const i=n[a].replace("$","");if(p.has(i)){const l=(o=p.get(i))==null?void 0:o.value;n[a]=l!=null?l:n[a]}}return t=n.join(" "),t}}const M=new D,_=new Map([["PS",{value:r.prompt,readonly:!1}],["VER",{value:r.pVer,readonly:!0}],["AUTHOR",{value:r.vendor,readonly:!0}],["PRODUCTNAME",{value:r.pName,readonly:!0}],["THEME",{value:r.defaultTheme,readonly:!0}]]),p=_,F={execute:(...c)=>{var e,t;if(c.length>1){const n=c[0],o=g.reset(((e=r.currentInstance.env.val.match(/"(.*?)"/))==null?void 0:e[1])||"");if(p.has(n)&&((t=p.get(n))==null?void 0:t.readonly)&&o)s.error("",!1),s.output(`Cannot set readonly variable "${n}".`);else{const a={value:g.reset(o||""),readonly:!1};p.set(n,a),s.outputColor(`Variable [${n}] set to [${o}].`,"var(--blue)")}}else s.error('missing arguments: type "HELP SET" for usage')},description:"Set a variable to a given string",usage:'SET <name> "<value>"'},O={execute:()=>{u.panic()},description:"Cause a kernel panic",usage:"PANIC"},B={execute:()=>{s.error("not implemented")},description:"Display the contents of the current directory",usage:"DIR <path>"};class q{constructor(){m(this,"defaultReturnValue",{message:"Internet Connection couldn't be established",documentation_url:"none"});m(this,"serverDownReturnValue",{message:"GitHub API offline!",documentation_url:"https://www.githubstatus.com/"})}async getUserRepos(e){return await this.getFromAPI(`users/${e}/repos`)}async getOrgRepos(e){return await this.getFromAPI(`orgs/${e}/repos`)}async getRepoDetails(e){return await this.getFromAPI(`repos/${e}`)}async getCommits(e){return await this.getFromAPI(`repos/${e}/commits`)}async getUserDetails(e){return await this.getFromAPI(`users/${e}`)}async getFromAPI(e){return await this.fetchJson(`https://api.github.com/${e}`)}async fetchJson(e){let t=await(await fetch(e)).json();return t?(t==null?void 0:t.message)=="Server Error"?this.serverDownReturnValue:t:this.defaultReturnValue}}const I=new q,V={execute:async(...c)=>{var e;if(c.length){const t=c[0].toLowerCase();b.has(t)?await((e=b.get(t))==null?void 0:e()):s.error(`"${t}" is not a valid sub-command!`)}else s.error('No sub-command specified! Type "HELP GH" for help')},description:"View information about GitHub repositories",usage:"GH <userrepo|orgrepo|repo|commits> <user/repo|user|org>"},b=new Map([["userrepo",async()=>{const c=r.currentInstance.env.argv[1],e=await I.getUserRepos(c);for(let t=0;t<e.length;t++)s.output(`${e[t].name.padEnd(35," ")}: `,!1),e[t].description?s.output(e[t].description):s.outputColor("[Description Not Found]","var(--gray)");e.length||s.error("User has no repos or user not found!")}],["orgrepo",async()=>{const c=r.currentInstance.env.argv[1],e=await I.getOrgRepos(c);for(let t=0;t<e.length;t++)s.output(`${e[t].name.padEnd(35," ")}: `,!1),e[t].description?s.output(e[t].description):s.outputColor("[Description Not Found]","var(--gray)");e.length||s.error("Organization has no repos or organization not found!")}],["repo",async()=>{const c=r.currentInstance.env.argv[1],e=await I.getRepoDetails(c);!e.message&&!e.documentation_url?(s.output(`Owner           : ${e.owner.login}`),s.output(`Full Name       : ${e.full_name}`),s.output(`Description     : ${e.description||"Description Not Found"}
`),s.output(`URL             : ${e.html_url}`),s.output(`Git URL         : ${e.html_url}.git
`),s.output(`Last Updated    : ${e.updated_at}`)):s.error(`Unable to get repo information: ${e.message}`)}],["commits",async()=>{const c=r.currentInstance.env.argv[1],e=await I.getCommits(c);if(!e.message&&!e.documentation_url){s.output("");for(let t=0;t<e.length;t++){const n=`Commit ${e[t].sha}`;s.output(`${n}
${g.createSeparatorFor(n)}
Message:
${e[t].commit.message}
Date: ${e[t].commit.author.date}
Created By: ${e[t].commit.author.name} (${e[t].commit.author.email})
`)}}else s.error(`Unable to get user information: ${e.message}`)}],["user",async()=>{const c=r.currentInstance.env.argv[1],e=await I.getUserDetails(c);!e.message&&!e.documentation_url?(s.outputColor(`Fetching user information of [${c}] . . .`,"var(--blue)"),s.output(`GitHub Name   : ${e.login||"Unknown"}
Full Name     : ${e.name||"Not specified"}
Bio           : ${e.bio||"No bio"}

Organization  : ${e.company||"Not part of an organization"}
Website       : ${e.blog||"No website specified"}
Email         : ${e.email||"No email specified"}
URL           : ${e.html_url||"Unable to fetch URL"}

Location      : ${e.location||"Not specified"}
Followers     : ${e.followers||0}
Following     : ${e.following||0}
`)):s.error(`Unable to get user information: ${e.message}`)}]]),j={execute:()=>{if(!r.currentInstance.env.hist.length){s.output("The history list is empty!");return}const c=r.currentInstance.env.hist.length.toString().length+1;for(let e=0;e<r.currentInstance.env.hist.length;e++)s.outputColor(`[${e.toString().padStart(c,"0")}]: ${r.currentInstance.env.hist[e]}`,"var(--yellow)")},description:"Display the history list",usage:"HIST"},G={execute:async(...c)=>{const t=c.join().match(/"(.*?)"/);let n="";const o=parseInt(c[0]);if(t&&t.length>1&&!!o){n=t[1],s.output(`Repeating "${n}" ${o} times...
`);for(let a=0;a<o;a++)await s.evaluateCommand(n,!0)}else s.error("Unable to repeat: syntax invalid!")},description:"Repeat the specified command a specified amount of times",usage:'REPEAT <amount> "<command>"'},W={execute:()=>{var e,t;let c=p.keys();for(let n of c)s.outputColor(`${((e=p.get(n))==null?void 0:e.readonly)?"@ ":"  "}[${n.padEnd(25," ")}]`,"var(--blue)",!1),s.output(`: ${(t=p.get(n))==null?void 0:t.value.replace(/\n/g,"\\n")}`)},description:"Display a list of all environment variables",usage:"ENV"},J="modulepreload",T={},K="/",y=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${K}${n}`,n in T)return;T[n]=!0;const o=n.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":J,o||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),o)return new Promise((l,d)=>{i.addEventListener("load",l),i.addEventListener("error",d)})})).then(()=>e())},f=new Map([[r.defaultTheme,{path:async()=>y(()=>Promise.resolve({}),["nTerm/assets/default.53f0f765.css"]),name:r.defaultTheme,author:r.vendor,className:"color-scheme-default"}],["gruvbox",{path:async()=>y(()=>Promise.resolve({}),["nTerm/assets/gruvbox.ac6a91ee.css"]),name:"Gruvbox Dark",author:"github/morhertz",className:"color-scheme-gruvbox"}],["nord",{path:async()=>y(()=>Promise.resolve({}),["nTerm/assets/nord.75d38213.css"]),name:"Nord",author:"Arctic Ice Studio",className:"color-scheme-nord"}],["onedark",{path:async()=>y(()=>Promise.resolve({}),["nTerm/assets/onedark.7aeb2712.css"]),name:"One Dark Pro",author:"Atom",className:"color-scheme-onedark"}]]);class z{async applyTheme(e){var t,n,o,a,i;if(f.has(e)){u.log(`Applying theme "${e}"...`),r.currentInstance.env.oldTheme=r.currentInstance.env.CurrentTheme,r.currentInstance.env.CurrentTheme=e,await((t=f.get(e))==null?void 0:t.path());const l=document.querySelectorAll("div.instanceDiv");for(let d=0;d<l.length;d++){const h=l[d];h.classList.remove(((n=f.get(r.currentInstance.env.oldTheme))==null?void 0:n.className)||`color-scheme-${r.defaultTheme}`),h.classList.add(((o=f.get(e))==null?void 0:o.className)||`color-scheme-${r.defaultTheme}`),document.body.classList.remove(((a=f.get(r.currentInstance.env.oldTheme))==null?void 0:a.className)||`color-scheme-${r.defaultTheme}`),document.body.classList.add(((i=f.get(e))==null?void 0:i.className)||`color-scheme-${r.defaultTheme}`)}return localStorage.setItem("theme",r.currentInstance.env.CurrentTheme),p.set("THEME",{value:e,readonly:!0}),!0}return!1}async loadStoredTheme(){u.log("Loading stored theme from LocalStorage...");const e=localStorage.getItem("theme");await this.applyTheme(e||r.defaultTheme)}}const $=new z,X={execute:async(...c)=>{var t,n;const e=c[0];if(await $.applyTheme(e)&&e){s.outputColor(`Applied theme [${(t=f.get(e))==null?void 0:t.name}] by [${(n=f.get(e))==null?void 0:n.author}]`,"var(--blue)");return}s.error("Unable to apply theme: not found")},description:"Applies the specified theme",usage:"THEME <name>"},Y={execute:async c=>{const e=c.match(/"(.*?)"/);if(e&&e.length>1){const t=e[1],n=await g.fetchJSON(t);for(const o in n)s.outputColor(`[  ${o.padEnd(40," ")}]: ${n[o]}`,"var(--yellow)")}else s.error("Unable to echo: syntax invalid!")},description:"Fetch the JSON data of a page.",usage:'GETJSON "<url>"'},Q={execute:()=>{if(Z()){s.outputColor("[SUCCESS]: you are connected to the internet","var(--green)");return}s.outputColor("[FAILURE]: you are not connected to the internet")},description:"Check the internet connection",usage:"NET"};function Z(){try{const c=new XMLHttpRequest;return c.open("GET","https://techworldinc.tk/ping/ping.html",!1),c.send(null),!!c.responseText.startsWith("pong")}catch{return!1}}const ee={execute:(...c)=>{const e=parseInt(c.join(""));s.output(Math.floor(Math.random()*e).toString())},usage:"RND <MAX>",description:"Generate a random number"},v=new Map([["help",H],["clear",R],["ver",P],["echo",A],["set",F],["panic",O],["dir",B],["gh",V],["hist",j],["repeat",G],["env",W],["theme",X],["getjson",Y],["net",Q],["rnd",ee]]),te={execute:()=>{u.log("Start Core Function 'default'"),s.error("",!1),s.output(`${r.currentInstance.env.cmd}: command not found`)}},ne={execute:()=>{u.log("Start Core Function 'intro'"),s.outputColor(`[\u2588] Welcome to [${r.pName}]!`,"var(--purple)"),s.outputColor("[\u2588]","var(--blue)"),s.outputColor(`[\u2588] You are on instance #[${r.currentInstance.id}]`,"var(--aqua)"),s.outputColor("[\u2588]","var(--green)"),s.outputColor(`[\u2588] Current theme is [${localStorage.getItem("theme")||r.defaultTheme}].`,"var(--yellow)"),s.outputColor("[\u2588]","var(--orange)"),s.outputColor("[\u2588] You can type [help] for a list of commands.","var(--red)")}},S=new Map([["default",te],["intro",ne]]);class re{output(e,t=!0){this.flushBufferToTemp();const n=M.replaceVariables(e),o=document.createElement("span");o.innerHTML=`${g.makeHTMLTagsURLSafe(n)}${t?`
`:""}`,r.currentInstance&&r.currentInstance.env.temp.append(o),this.flushTempToBuffer(),this.syncTarget()}error(e,t=!0){this.outputColor(`[Error]: ${e}`,"var(--red)",t)}prompt(){if(!r.kHalt){u.log("Started userInterface.prompt");const e=this.getPrompt();if(r.currentInstance.iId){u.log(`Unfocused input ${r.currentInstance.iId}`);const n=document.getElementById(`${r.currentInstance.iId}`),o=document.createElement("span");o.innerText=`${r.currentInstance.env.cmd} ${r.currentInstance.env.argv.join(" ")}`,o.id=`UNFOCUSED ${r.currentInstance.iId}`;try{n.insertAdjacentElement("beforebegin",o),n.remove()}catch{}r.currentInstance.buffer=r.currentInstance.target.innerHTML}this.flushBufferToTemp(),u.log("Started userInterface.prompt"),this.outputColor(`
${g.reset(e)}`,"var(--gray)",!1);const t=document.createElement("input");t.className="input",t.id=`${r.currentInstance.id}#${Math.floor(Math.random()*999999999)}`,t.style.width=`calc(100% - ${e.length}em)`,t.spellcheck=!1,r.currentInstance.iId=t.id,r.currentInstance.env.temp.append(t),this.flushTempToBuffer(),this.output("")}}async evaluateCommand(e,t){var l,d,h;u.log("Started userInterface.evaluateCommand");const n=document.getElementById(r.currentInstance.iId);let o,a,i;if(e?(i=e,o=e.split(" "),a=o[0].toLowerCase()):(i=n.value,r.currentInstance.env.val=n==null?void 0:n.value,o=n==null?void 0:n.value.split(" "),a=o[0].toLowerCase()),r.currentInstance.env.cmd=a,r.currentInstance.env&&r.currentInstance.env.hist.push(i),v.has(a)&&r.currentInstance.env){r.currentInstance.env.argv=o.slice(1),u.log(`Executing command "${a}" (${(l=v.get(a))==null?void 0:l.description})`);try{r.currentInstance.env&&await((d=v.get(a))==null?void 0:d.execute(...r.currentInstance.env.argv))}catch(C){throw u.panic(),C}}else u.log(`Execution of command "${a}" failed: no such definition`),document.getElementById(r.currentInstance.iId).value=i,a&&((h=S.get("default"))==null||h.execute());t||(this.prompt(),document.getElementById(r.currentInstance.iId).focus())}inputFocusLoop(){function e(t){const n=t.composedPath(),o=document.getElementById(r.currentInstance.iId);n.includes(document.getElementById(`${r.currentInstance.id}`))&&(o.focus(),r.kHalt&&document.removeEventListener("mousedown",e)),t.stopPropagation(),t.stopImmediatePropagation()}document.addEventListener("click",e)}getPrompt(){var n,o;let e="";const t=(((n=p.get("PS"))==null?void 0:n.value)||r.prompt).split(" ");for(let a=0;a<t.length;a++){if(t[a].startsWith("$")){const i=t[a].replace("$","");if(p.has(i)){const l=(o=p.get(i))==null?void 0:o.value;t[a]=l!=null?l:t[a]}}e+=`${t[a]} `}return e.trimEnd(),e}outputColor(e,t="var(--red)",n=!0,o=""){const a=e.split(/(\[[^\]]*\])/);for(let i=0;i<a.length;i++){const l=document.createElement("span"),d=a[i].startsWith("[")&&a[i].endsWith("]");l.style.color=d?t:o,l.innerText=g.reset(g.makeHTMLTagsURLSafe(g.removeCharsFromString(a[i],["[","]"]))),r.currentInstance&&r.currentInstance.env.temp.append(l)}this.flushTempToBuffer(),this.output("",n)}flushTempToBuffer(){u.log("Flushing temp to buffer..."),r.currentInstance&&(r.currentInstance.buffer=r.currentInstance.env.temp.innerHTML)}flushBufferToTemp(){u.log("Flushing buffer to temp..."),r.currentInstance&&(r.currentInstance.env.temp.innerHTML=r.currentInstance.buffer)}syncTarget(){u.log("Syncing instance target with instance buffer..."),r.currentInstance&&(r.currentInstance.target.innerHTML=r.currentInstance.buffer)}}const s=new re;class oe{register(){u.log("Started Keyboard.register"),document.addEventListener("keydown",e=>{this.processEvent(e)})}processEvent(e){switch(e.key.toLowerCase()){case"enter":s.evaluateCommand(),e.stopPropagation(),e.stopImmediatePropagation();break;case"arrowup":console.log("arrowup");break;case"arrowdown":console.log("arrowdown");break}}}const ae=new oe;class se{loadInstance(e){if(u.log(`Loading instance #${e.id} . . .`),e==null?void 0:e.target){r.instances.set(e==null?void 0:e.id.toString(),e),this.switchInstance(e);return}}switchInstance(e){e&&(r.currentInstance=e,r.currentInstance.env.temp=document.getElementById(`temp#${e==null?void 0:e.id}`),document.title=(e==null?void 0:e.name)||r.pName,s.syncTarget())}}const w=new se;class ce{constructor(){m(this,"interval");m(this,"validresponse","pong");m(this,"defaultDelay",1e3)}start(e=this.defaultDelay){this.interval=setInterval(()=>{!this.get()&&!r.kHalt&&this.stop()},e)}stop(){try{r.currentInstance.env.temp.innerHTML=""}catch{}s.flushTempToBuffer(),s.syncTarget(),r.kHalt=!0,s.error(`Connection to dev server lost, unable to proceed.

System halted. Press Ctrl+R to restart.
`),s.outputColor(`[Details: unable to fetch "${window.location.host}/nTerm/__ping"]`,"var(--gray)"),clearInterval(this.interval)}get(){try{const e=new XMLHttpRequest;return e.open("GET","/nTerm/__ping",!1),e.send(null),e.responseText==this.validresponse}catch{return!1}}}const E=new ce;class ie{init(e){var t;if(e){this.setIntervals(),r.kStartTime=new Date().getTime();const n={target:e,buffer:"",id:parseInt(e.id),iId:"",env:{hist:[],kLog:[],argv:[],temp:document.getElementById("tmp"),cmd:"",val:"",path:"/",CurrentTheme:"",oldTheme:""}};this.log(`Creating Instance #${n.id}`);const o=document.createElement("noscript");o.id=`temp#${n.id}`,document.body.append(o),r.currentInstance&&(r.currentInstance.env.temp=o),w.loadInstance(n),/*E.start()*/ae.register(),$.loadStoredTheme(),s.inputFocusLoop(),(t=S.get("intro"))==null||t.execute(),this.log("Starting prompt..."),s.prompt()}}setIntervals(){setInterval(()=>{var e;r.kHalt&&r.currentInstance&&((e=document.getElementById(r.currentInstance.iId))==null||e.setAttribute("disabled","true")),window.onerror=console.error=()=>{this.panic()},document.addEventListener("error",()=>{this.panic()})},50)}panic(){r.kHalt=!0,E.stop(),this.log("SYSTEM PANIC! ABORTING ALL PROCESSES..."),r.currentInstance&&(r.currentInstance.target.innerHTML=r.currentInstance.buffer=""),s.output(`! KERNEL PANIC !

Kernel Log:`);let e="";if(r.currentInstance)for(let t=0;t<r.currentInstance.env.kLog.length;t++)e+=`${r.currentInstance.env.kLog[t]}
`;s.output(e),s.output(`
System halted. Press Ctrl+R to restart.`)}log(e=""){const t=new Date().getTime()-r.kStartTime;r.currentInstance&&r.currentInstance.env.kLog.push(`[${t}] ${e}`)}}const u=new ie;class le{createNewTab(){const e=document.querySelector("div#tabs"),t=document.querySelectorAll("div.instanceTab"),n=document.querySelector("div#instances"),o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("span"),l=document.createElement("text"),d=Math.floor(Math.random()*32768);a.className="instanceTab",o.className="instanceDiv",o.id=`${d}`,a.id=`tab#${d}`,i.innerText="x",i.className="close",l.innerText=`${d}`,i.addEventListener("click",h=>{this.closeTab(d),h.stopPropagation(),h.stopImmediatePropagation()}),a.addEventListener("click",h=>{this.switchTab(a,o),h.stopPropagation(),h.stopImmediatePropagation()}),a.append(l,i),t.length<=10&&(n.append(o),e.append(a),u.init(o),this.switchTab(a,o))}switchTab(e,t){const n=document.querySelectorAll("div.instanceDiv"),o=document.querySelectorAll("div.instanceTab");for(let a=0;a<n.length;a++){const i=n[a];i==t?(i.classList.remove("hidden"),w.switchInstance(r.instances.get(i.id))):i.classList.add("hidden")}for(let a=0;a<o.length;a++){const i=o[a];i==e?i.classList.add("selected"):i.classList.remove("selected")}try{document.getElementById(r.currentInstance.iId).focus()}catch{}}closeTab(e){var o;let t=0;const n=(o=document.querySelector("div#tabs"))==null?void 0:o.children;for(let a of r.instances)a[1].id==e&&r.instances.delete(a[0]);for(let a in n)t++;if(t>1){const a=document.querySelector(`div.instanceTab[id*="tab#${e}"]`),i=document.querySelector(`div.instanceDiv[id*="${e}"]`);a&&document.querySelector("div#tabs").removeChild(a),i&&document.querySelector("div#instances").removeChild(i);const l=document.querySelectorAll("div#tabs div"),d=document.querySelectorAll("div#instances div");this.switchTab(l[l.length-1],d[l.length-1])}}init(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div");n.id="tabs",t.innerText="+",t.className="createButton",t.addEventListener("click",()=>{this.createNewTab()}),o.id="instances",e.append(n),e.append(t),e.className="tabHolder",document.body.append(e),document.body.append(o),this.createNewTab()}}const ue=new le;try{ue.init()}catch(c){throw u.panic(),c}
